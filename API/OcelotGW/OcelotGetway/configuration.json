{
  "ReRoutes": [
    {//給API.Test測試使用的配置
      "DownstreamPathTemplate": "/api/values", //下游路径
      "DownstreamScheme": "http", //下游协议
      "DownstreamHostAndPorts": [ //下游主机及端口
        {
          "Host": "localhost",
          "Port": "5009"
        }
      ],
      "UpstreamPathTemplate": "/webapi/values", //上游路径
      "UpstreamHttpMethod": [ "Get" ] //上游使用的http方法
      //"AuthenticationOptions": {
      //  "AuthenticationProviderKey": "TestKey",
      //  "AllowScopes": []
      //}
    },

    {
      "DownstreamPathTemplate": "/api/values/{id}",
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "localhost",
          "Port": 5002
        }
      ],
      "UpstreamPathTemplate": "/webapib/values/{id}",
      "UpstreamHttpMethod": [ "Get" ]
    },
    {
      "DownstreamPathTemplate": "/api/User/GetSex",
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "localhost",
          "Port": 5001
        }
      ],
      "UpstreamPathTemplate": "/Sex",
      "UpstreamHttpMethod": [ "Get" ],
      "Key": "Sex"
    },
    {
      "DownstreamPathTemplate": "/api/User/GetAge",
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "localhost",
          "Port": 5001
        }
      ],
      "UpstreamPathTemplate": "/Age",
      "UpstreamHttpMethod": [ "Get" ],
      "Key": "Age"
    },
    {
      "DownstreamPathTemplate": "/api/User/GetID",
      "DownstreamScheme": "http",
      "DownstreamHostAndPorts": [
        {
          "Host": "localhost",
          "Port": 5001
        }
      ],
      "UpstreamPathTemplate": "/ID",
      "UpstreamHttpMethod": [ "Get" ],
      "Key": "ID"
    }





    // --> Identity Service Part
    //{
    //  "UseServiceDiscovery": false, // do not use Consul service discovery in DEV env
    //  "DownstreamPathTemplate": "/api/{url}",
    //  "DownstreamScheme": "http",
    //  "DownstreamHostAndPorts": [
    //    {
    //      "Host": "192.168.2.83",
    //      "Port": "5000"
    //    }
    //  ],
    //  "ServiceName": "社交网络",
    //  "LoadBalancerOptions": {
    //    "Type": "RoundRobin"
    //  },
    //  "UpstreamPathTemplate": "/api/identityservice/{url}",
    //  "UpstreamHttpMethod": [ "Get", "Post" ],
    //  "RateLimitOptions": {
    //    "ClientWhitelist": [ "admin" ], // 白名单
    //    "EnableRateLimiting": true, // 是否启用限流
    //    "Period": "1m", // 统计时间段：1s, 5m, 1h, 1d
    //    "PeriodTimespan": 15, // 多少秒之后客户端可以重试
    //    "Limit": 10 // 在统计时间段内允许的最大请求数量
    //  },
    //  "QoSOptions": {
    //    "ExceptionsAllowedBeforeBreaking": 2, // 允许多少个异常请求
    //    "DurationOfBreak": 5000, // 熔断的时间，单位为秒
    //    "TimeoutValue": 3000 // 如果下游请求的处理时间超过多少则视如该请求超时
    //  },
    //  "HttpHandlerOptions": {
    //    "UseTracing": false // use butterfly to tracing request chain
    //  },
    //  "ReRoutesCaseSensitive": false // non case sensitive
    //}


  ],

  "Aggregates": [
    {
      "ReRouteKeys": [
        "Sex",
        "Age",
        "ID"
      ],
      "UpstreamPathTemplate": "/GetUserInfo"
    }
  ]
}