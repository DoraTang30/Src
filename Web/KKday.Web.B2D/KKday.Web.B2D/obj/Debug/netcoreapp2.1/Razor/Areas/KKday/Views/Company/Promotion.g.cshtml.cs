#pragma checksum "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "68f7b5dcecbaf87e6a126e17611c24db44fe6c54"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Areas_KKday_Views_Company_Promotion), @"mvc.1.0.view", @"/Areas/KKday/Views/Company/Promotion.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Areas/KKday/Views/Company/Promotion.cshtml", typeof(AspNetCore.Areas_KKday_Views_Company_Promotion))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/_ViewImports.cshtml"
using KKday.Web.B2D.BE;

#line default
#line hidden
#line 2 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/_ViewImports.cshtml"
using KKday.Web.B2D.BE.Areas.KKday.Models;

#line default
#line hidden
#line 1 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
using KKday.Web.B2D.BE.Models.Model.Common;

#line default
#line hidden
#line 2 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
using KKday.Web.B2D.BE.Models.Model.PriceSetting;

#line default
#line hidden
#line 3 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
using Resources;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"68f7b5dcecbaf87e6a126e17611c24db44fe6c54", @"/Areas/KKday/Views/Company/Promotion.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"977b9f6ad86b5d9429da0e7ea54509a25193626b", @"/Areas/KKday/Views/_ViewImports.cshtml")]
    public class Areas_KKday_Views_Company_Promotion : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<List<B2dDiscountMst>>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(114, 2, true);
            WriteLiteral("\r\n");
            EndContext();
#line 7 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
  
    Layout = "_layoutMain";
    var xid = ViewData["xid"];

#line default
#line hidden
            BeginContext(243, 102, true);
            WriteLiteral("\r\n\r\n<nav aria-label=\"breadcrumb\">\r\n    <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item\"><a");
            EndContext();
            BeginWriteAttribute("href", " href=\"", 345, "\"", 375, 1);
#line 15 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
WriteAttributeValue("", 352, Url.Content("~/KKday"), 352, 23, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(376, 52, true);
            WriteLiteral(">Home</a></li>\r\n        <li class=\"breadcrumb-item\">");
            EndContext();
            BeginContext(429, 32, false);
#line 16 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
                               Write(localizer.Text.Title_Distributor);

#line default
#line hidden
            EndContext();
            BeginContext(461, 70, true);
            WriteLiteral("</li>\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">");
            EndContext();
            BeginContext(532, 39, false);
#line 17 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
                                                          Write(localizer.Text.Company_PromotionSetting);

#line default
#line hidden
            EndContext();
            BeginContext(571, 57, true);
            WriteLiteral("</li>\r\n    </ol>\r\n</nav>\r\n\r\n<input type=\"hidden\" id=\"xid\"");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 628, "\"", 640, 1);
#line 21 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
WriteAttributeValue("", 636, xid, 636, 4, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(641, 102, true);
            WriteLiteral(" />\r\n<div class=\"container\">\r\n    <div class=\"row\">\r\n        <div class=\"col-xs-12\">\r\n            <h4>");
            EndContext();
            BeginContext(744, 23, false);
#line 25 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
           Write(ViewData["CompanyName"]);

#line default
#line hidden
            EndContext();
            BeginContext(767, 351, true);
            WriteLiteral(@"</h4>
        </div>

        <div class=""col-xs-12"">
            <a href=""javascript:void(0);"" data-title=""Add"" class=""btn"" data-toggle=""modal"" data-target=""#disc_add_new""><i class=""fas fa-plus""></i> 新增優惠規則</a>

            <hr style=""margin: 3px 0 3px 0; padding: 3px 0 3px 0;"" />
        </div>
        
        <div class=""col-xs-12"">

");
            EndContext();
#line 36 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
             if (Model == null || Model.Count() < 1)
            {

#line default
#line hidden
            BeginContext(1187, 22, true);
            WriteLiteral("                <span>");
            EndContext();
            BeginContext(1210, 29, false);
#line 38 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
                 Write(localizer.Text.Data_Not_Found);

#line default
#line hidden
            EndContext();
            BeginContext(1239, 9, true);
            WriteLiteral("</span>\r\n");
            EndContext();
#line 39 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
            }
            else
            {

#line default
#line hidden
            BeginContext(1296, 406, true);
            WriteLiteral(@"                <table id=""mytable"" class=""table table-bordred table-striped"">
                    <thead>
                        <tr>
                            <th><input type=""checkbox"" id=""checkall"" /></th>
                            <th>Discount Name</th>
                            <th>Delete</th>
                        </tr>
                    </thead>

                    <tbody>
");
            EndContext();
#line 52 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
                         foreach (var item in Model)
                        {

#line default
#line hidden
            BeginContext(1783, 239, true);
            WriteLiteral("                            <tr>\r\n                                <td><input type=\"checkbox\" class=\"checkthis\" aria-label=\"Select all items in this table\" title=\"Select all items in this table\" /></td>\r\n                                <td>");
            EndContext();
            BeginContext(2023, 14, false);
#line 56 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
                               Write(item.DISC_NAME);

#line default
#line hidden
            EndContext();
            BeginContext(2037, 185, true);
            WriteLiteral("</td>\r\n                                <td>\r\n                                    <button class=\"btn btn-danger btn-xs\" data-title=\"Delete\" data-toggle=\"modal\" data-target=\"#disc_delete\"");
            EndContext();
            BeginWriteAttribute("onclick", " onclick=\"", 2222, "\"", 2298, 3);
            WriteAttributeValue("", 2232, "$(\'#disc_delete\').find(\'.btn-success\').attr(\'mst_xid\',", 2232, 54, true);
#line 58 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
WriteAttributeValue(" ", 2286, item.XID, 2287, 9, false);

#line default
#line hidden
            WriteAttributeValue("", 2296, ");", 2296, 2, true);
            EndWriteAttribute();
            BeginContext(2299, 213, true);
            WriteLiteral(">\r\n                                        <span class=\"glyphicon glyphicon-trash\"></span>\r\n                                    </button>\r\n                                </td>\r\n                            </tr>\r\n");
            EndContext();
#line 63 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
                        }

#line default
#line hidden
            BeginContext(2539, 56, true);
            WriteLiteral("                    </tbody>\r\n                </table>\r\n");
            EndContext();
#line 66 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
            }

#line default
#line hidden
            BeginContext(2610, 715, true);
            WriteLiteral(@"
        </div>
    </div>

    <div class=""row"">
        <div class=""col-xs-12"">
            <hr />
            <button type=""button"" class=""btn btn-default"" onclick=""window.history.go(-1);"">回上一頁</button>
        </div>
    </div>
</div>



<div class=""modal fade"" id=""disc_add_new"" tabindex=""-1"" role=""dialog"" aria-labelledby=""edit"" aria-hidden=""true"">
    <div class=""modal-dialog"">
        <div class=""modal-content"">
            <div class=""modal-header"">
                <button type=""button"" class=""close"" data-dismiss=""modal"" aria-hidden=""true""><span class=""glyphicon glyphicon-remove"" aria-hidden=""true""></span></button>
                <h4 class=""modal-title custom_align"" id=""Heading"">");
            EndContext();
            BeginContext(3326, 18, false);
#line 86 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
                                                             Write(localizer.Text.Add);

#line default
#line hidden
            EndContext();
            BeginContext(3344, 356, true);
            WriteLiteral(@"</h4>
            </div>
            <div class=""modal-body"">
                <span>Loading...</span>
            </div>
            <div class=""modal-footer "">
                <button type=""button"" class=""btn btn-warning btn-lg"" style=""width: 100%;"" onclick=""InsertDiscount();"">
                    <span class=""glyphicon glyphicon-ok-sign""></span>");
            EndContext();
            BeginContext(3701, 21, false);
#line 93 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
                                                                Write(localizer.Text.Insert);

#line default
#line hidden
            EndContext();
            BeginContext(3722, 612, true);
            WriteLiteral(@"
                </button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>



<div class=""modal fade"" id=""disc_delete"" tabindex=""-1"" role=""dialog"" aria-labelledby=""edit"" aria-hidden=""true"">
    <div class=""modal-dialog"">
        <div class=""modal-content"">
            <div class=""modal-header"">
                <button type=""button"" class=""close"" data-dismiss=""modal"" aria-hidden=""true""><span class=""glyphicon glyphicon-remove"" aria-hidden=""true""></span></button>
                <h4 class=""modal-title custom_align"" id=""Heading"">");
            EndContext();
            BeginContext(4335, 21, false);
#line 109 "/Users/zhangfengrong/Documents/GitHub/BID/Src/Web/KKday.Web.B2D/KKday.Web.B2D/Areas/KKday/Views/Company/Promotion.cshtml"
                                                             Write(localizer.Text.Delete);

#line default
#line hidden
            EndContext();
            BeginContext(4356, 3284, true);
            WriteLiteral(@"</h4>
            </div>
            <div class=""modal-body"">
                <div class=""alert alert-danger""><span class=""glyphicon glyphicon-warning-sign""></span> Are you sure you want to delete this Record?</div>

            </div>
            <div class=""modal-footer "">
                <button type=""button"" class=""btn btn-success"" onclick=""RemoveDiscount();""><span class=""glyphicon glyphicon-ok-sign""></span> Yes</button>
                <button type=""button"" class=""btn btn-default"" data-dismiss=""modal""><span class=""glyphicon glyphicon-remove""></span> No</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<script type=""text/javascript"">
    $(function(){

         $('#disc_add_new').on('show.bs.modal', function(e) {
            // var xid = $(e.relatedTarget).data('paragraphs');
            var xid = $(""#xid"").val();
            var modal_body =  $(this).find('.modal-body');
            $(modal_body).html(""<span>L");
            WriteLiteral(@"oading...</span>"");

            $.get(_root_path + ""Company/GetAvailDiscounts/"" + xid, function(result) {
               $(modal_body).html(result.content);
            });
        });

    });

    function InsertDiscount() {
        var jsonObj = { xid : $(""#xid"").val(), disc : [] };
        $(""#disc_tbl .checkthis:checked"").each(function(){
            jsonObj.disc.push($(this).val());
        });

        console.log(JSON.stringify(jsonObj));

        $.ajax({
            type: ""POST"",
            url: _root_path + ""Company/InsertDiscount"",
            contentType: ""application/json"",
            data: JSON.stringify(jsonObj),
            dataType: ""json"",
            error: function (jqXHR, textStatus, errorThrown) {
                // console.log(""jqXHR => respText: "" + jqXHR.responseText + "", status: "" + jqXHR.status + "", readyState: "" + jqXHR.readyState + "", statusText: "" + jqXHR.statusText);
                console.log(""textStatus: "" +textStatus + "", error: "" + errorThrown);");
            WriteLiteral(@"
            },
            success: function (result) {
                // console.log(""result: "" + JSON.stringify(result));
                if(result.status == ""OK"") {
                    window.location.reload();
                }
            }
        });
    }

    function RemoveDiscount() {
        $.ajax({
            type: ""POST"",
            url: _root_path + ""Company/RemoveDiscount"",
            contentType: ""application/json"",
            data: JSON.stringify({ xid : $(""#xid"").val(), mst_xid : $('#disc_delete').find('.btn-success').attr('mst_xid') }),
            dataType: ""json"",
            error: function (jqXHR, textStatus, errorThrown) {
                // console.log(""jqXHR => respText: "" + jqXHR.responseText + "", status: "" + jqXHR.status + "", readyState: "" + jqXHR.readyState + "", statusText: "" + jqXHR.statusText);
                console.log(""textStatus: "" +textStatus + "", error: "" + errorThrown);
            },
            success: function (result) {
               ");
            WriteLiteral(" // console.log(\"result: \" + JSON.stringify(result));\r\n                if(result.status == \"OK\") {\r\n                    window.location.reload();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n</script>");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public ILocalizer localizer { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<List<B2dDiscountMst>> Html { get; private set; }
    }
}
#pragma warning restore 1591
